#include <stdio.h>
#include <string.h>

struct {
    char fname[20];
    int in_use;
} dir[10];

int main() {
    int i, ch;
    char f[20];

    for (i = 0; i < 10; i++)
        dir[i].in_use = 0; // Initialize directory entries

    printf("\n--- Single Level Directory Simulation ---\n");

    while (1) {
        printf("\nMenu:\n");
        printf("1. Create File\n");
        printf("2. Delete File\n");
        printf("3. Search File\n");
        printf("4. Display Files\n");
        printf("5. Exit\n");
        printf("Enter your choice: ");
        scanf("%d", &ch);

        switch (ch) {
        case 1: // Create file
            printf("Enter file name to create: ");
            scanf("%s", f);

            // Check for duplicate
            for (i = 0; i < 10; i++) {
                if (dir[i].in_use && strcmp(dir[i].fname, f) == 0) {
                    printf("File already exists!\n");
                    break;
                }
            }

            if (i == 10) {
                // Create file
                for (i = 0; i < 10; i++) {
                    if (!dir[i].in_use) {
                        strcpy(dir[i].fname, f);
                        dir[i].in_use = 1;
                        printf("File '%s' created successfully.\n", f);
                        break;
                    }
                }
                if (i == 10)
                    printf("Directory full!\n");
            }
            break;

        case 2: // Delete file
            printf("Enter file name to delete: ");
            scanf("%s", f);
            for (i = 0; i < 10; i++) {
                if (dir[i].in_use && strcmp(dir[i].fname, f) == 0) {
                    dir[i].in_use = 0;
                    printf("File '%s' deleted.\n", f);
                    break;
                }
            }
            if (i == 10)
                printf("File not found!\n");
            break;

        case 3: // Search file
            printf("Enter file name to search: ");
            scanf("%s", f);
            for (i = 0; i < 10; i++) {
                if (dir[i].in_use && strcmp(dir[i].fname, f) == 0) {
                    printf("File '%s' found at position %d.\n", f, i + 1);
                    break;
                }
            }
            if (i == 10)
                printf("File not found!\n");
            break;

        case 4: // Display files
            printf("\nFiles in Directory:\n");
            for (i = 0; i < 10; i++) {
                if (dir[i].in_use)
                    printf("%s\n", dir[i].fname);
            }
            break;

        case 5:
            printf("Exiting...\n");
            return 0;

        default:
            printf("Invalid choice!\n");
        }
    }
}
